<ion-header>
  <ion-toolbar>
    <ion-title>Menu</ion-title>
  </ion-toolbar>
</ion-header>

 <ion-content class="ion-padding">
  <ion-segment [(ngModel)]="selectedView">
    <ion-segment-button value="saisieSegment">
      <ion-label>Saisie</ion-label>
    </ion-segment-button>
    <ion-segment-button value="updateSegment">
      <ion-label>Mise à jour</ion-label>
    </ion-segment-button>
    <ion-segment-button value="historySegment">
      <ion-label>Historique</ion-label>
    </ion-segment-button>
  </ion-segment> 

  <div [ngSwitch]="selectedView">
    <div *ngSwitchCase="'saisieSegment'">    
      <form [formGroup]="saisieForm">
        <!-- Label ID Capteur -->
        <ion-item>                                                 
          <ion-label floating color="primary">N° Capteur</ion-label>
          <ion-input type="text" formControlName="num_capteur" [(ngModel)]="num_capteur"></ion-input>
        </ion-item>
        <!-- Message d'erreurs -->
        <div class="validation-errors">                           
          <ng-container *ngFor="let validation of messagesDeValidation.num_capteur">
            <div class="error-message" *ngIf="saisieForm.get('num_capteur').hasError(validation.type) 
            && (saisieForm.get('num_capteur').dirty || saisieForm.get('num_capteur').touched)">
              {{ validation.message }}
            </div>
          </ng-container>
        </div>

        <!-- Label Emplacement -->
        <ion-item>
          <ion-label>N° Emplacement</ion-label>                 
          <ion-select placeholder="Select One" formControlName="num_emplacement" [(ngModel)]="num_emplacement"  >
            <ion-select-option value="emplacement" *ngFor="let index of emplacements" > {{emplacement}} </ion-select-option>     
            
            <!--
            <ion-select-option value="900A00">900A00</ion-select-option>
            <ion-select-option value="900A01">900A01</ion-select-option>
            <ion-select-option value="900A02">900A02</ion-select-option>
            <ion-select-option value="900A03">900A03</ion-select-option>
            <ion-select-option value="900A04">900A04</ion-select-option>
            <ion-select-option value="900A05">900A05</ion-select-option>
            <ion-select-option value="900A06">900A06</ion-select-option>
            <ion-select-option value="900A07">900A07</ion-select-option>
            <ion-select-option value="900A08">900A08</ion-select-option>
            <ion-select-option value="900A09">900A09</ion-select-option>
            <ion-select-option value="900A10">900A10</ion-select-option>
            <ion-select-option value="900A11">900A11</ion-select-option>
            <ion-select-option value="900A12">900A12</ion-select-option>
            <ion-select-option value="900A13">900A13</ion-select-option>
            <ion-select-option value="900A14">900A14</ion-select-option>
            <ion-select-option value="900A15">900A15</ion-select-option>
            <ion-select-option value="900A16">900A16</ion-select-option>
            <ion-select-option value="900A17">900A17</ion-select-option>
            <ion-select-option value="900A18">900A18</ion-select-option>
            <ion-select-option value="900A19">900A19</ion-select-option>
            <ion-select-option value="900A20">900A20</ion-select-option>
            <ion-select-option value="900A21">900A21</ion-select-option>
            <ion-select-option value="900A22">900A22</ion-select-option>
            <ion-select-option value="900A23">900A23</ion-select-option>
            <ion-select-option value="900A24">900A24</ion-select-option>
            <ion-select-option value="900A25">900A25</ion-select-option>
            <ion-select-option value="900A26">900A26</ion-select-option>
            <ion-select-option value="900A27">900A27</ion-select-option>
            <ion-select-option value="900A28">900A28</ion-select-option>
            <ion-select-option value="900A29">900A29</ion-select-option>
            <ion-select-option value="900A30">900A30</ion-select-option>
            <ion-select-option value="900A31">900A31</ion-select-option>
            <ion-select-option value="900A32">900A32</ion-select-option>
            <ion-select-option value="900A33">900A33</ion-select-option>
            <ion-select-option value="900A34">900A34</ion-select-option>
            <ion-select-option value="900A35">900A35</ion-select-option>
            <ion-select-option value="900A36">900A36</ion-select-option>
            <ion-select-option value="900A37">900A37</ion-select-option>
            <ion-select-option value="900A38">900A38</ion-select-option>
            <ion-select-option value="900A39">900A39</ion-select-option>
            <ion-select-option value="900A40">900A40</ion-select-option>
            <ion-select-option value="900A41">900A41</ion-select-option>
            <ion-select-option value="900A42">900A42</ion-select-option>
            <ion-select-option value="900A43">900A43</ion-select-option>
            <ion-select-option value="900A44">900A44</ion-select-option>
            <ion-select-option value="900A45">900A45</ion-select-option>>
  -->
          </ion-select>
        </ion-item>
        <!-- Message d'erreurs -->
        <div class="validation-errors">                          
          <ng-container *ngFor="let validation of messagesDeValidation.num_emplacement">
            <div class="error-message" *ngIf="saisieForm.get('num_emplacement').hasError(validation.type) 
            && (saisieForm.get('num_emplacement').dirty || saisieForm.get('num_emplacement').touched)">
              {{ validation.message }}
            </div>
          </ng-container>
        </div>

        <!-- Boutons -->
        <ion-button (click)="saveFormData();" [disabled]="!saisieForm.valid" shape="round" size="default" color="primary" expand="block">
          <ion-icon name="create"></ion-icon>
          Enregistrer
        </ion-button>
        
        <ion-button (click)="getEntityLine()" size="default" color="primary" expand="full">
          <ion-icon name="create"></ion-icon>
          Get Ligne
        </ion-button>
        <ion-button (click)="updateEntityLine()" size="default" color="primary" expand="full">
          <ion-icon name="create"></ion-icon>
          updateEntityLine
        </ion-button>
        <ion-button (click)="startScanning()" expand="full" color="danger" shape="round" size="default" >
          <ion-icon name="camera" slot="start"></ion-icon>
          QRCode
        </ion-button>
      
      </form>
    </div>
 
    <div *ngSwitchCase="'updateSegment'">

        
      <form [formGroup]="updateForm">
        <!-- Label ID Capteur -->
        <ion-item>                                                 
          <ion-label floating color="primary">N° Capteur</ion-label>
          <ion-input type="text" formControlName="num_capteur" [(ngModel)]="num_capteur"></ion-input>
        </ion-item>
        <!-- Message d'erreurs -->
        <div class="validation-errors">                           
          <ng-container *ngFor="let validation of messagesDeValidation.num_capteur">
            <div class="error-message" *ngIf="saisieForm.get('num_capteur').hasError(validation.type) 
            && (saisieForm.get('num_capteur').dirty || saisieForm.get('num_capteur').touched)">
              {{ validation.message }}
            </div>
          </ng-container>
        </div>

        <!-- Label Emplacement -->
        <ion-item>
    <!--
          <ion-label>N° Emplacement</ion-label>                 
          <ion-select placeholder="Select One" formControlName="num_emplacement" [(ngModel)]="num_emplacement">
            <ion-select-option value="900A00">900A00</ion-select-option>
            <ion-select-option value="900A01">900A01</ion-select-option>
            <ion-select-option value="900A02">900A02</ion-select-option>
            <ion-select-option value="900A03">900A03</ion-select-option>
            <ion-select-option value="900A04">900A04</ion-select-option>
            <ion-select-option value="900A05">900A05</ion-select-option>
            <ion-select-option value="900A06">900A06</ion-select-option>
            <ion-select-option value="900A07">900A07</ion-select-option>
            <ion-select-option value="900A08">900A08</ion-select-option>
            <ion-select-option value="900A09">900A09</ion-select-option>
            <ion-select-option value="900A10">900A10</ion-select-option>
            <ion-select-option value="900A11">900A11</ion-select-option>
            <ion-select-option value="900A12">900A12</ion-select-option>
            <ion-select-option value="900A13">900A13</ion-select-option>
            <ion-select-option value="900A14">900A14</ion-select-option>
            <ion-select-option value="900A15">900A15</ion-select-option>
            <ion-select-option value="900A16">900A16</ion-select-option>
            <ion-select-option value="900A17">900A17</ion-select-option>
            <ion-select-option value="900A18">900A18</ion-select-option>
            <ion-select-option value="900A19">900A19</ion-select-option>
            <ion-select-option value="900A20">900A20</ion-select-option>
            <ion-select-option value="900A21">900A21</ion-select-option>
            <ion-select-option value="900A22">900A22</ion-select-option>
            <ion-select-option value="900A23">900A23</ion-select-option>
            <ion-select-option value="900A24">900A24</ion-select-option>
            <ion-select-option value="900A25">900A25</ion-select-option>
            <ion-select-option value="900A26">900A26</ion-select-option>
            <ion-select-option value="900A27">900A27</ion-select-option>
            <ion-select-option value="900A28">900A28</ion-select-option>
            <ion-select-option value="900A29">900A29</ion-select-option>
            <ion-select-option value="900A30">900A30</ion-select-option>
            <ion-select-option value="900A31">900A31</ion-select-option>
            <ion-select-option value="900A32">900A32</ion-select-option>
            <ion-select-option value="900A33">900A33</ion-select-option>
            <ion-select-option value="900A34">900A34</ion-select-option>
            <ion-select-option value="900A35">900A35</ion-select-option>
            <ion-select-option value="900A36">900A36</ion-select-option>
            <ion-select-option value="900A37">900A37</ion-select-option>
            <ion-select-option value="900A38">900A38</ion-select-option>
            <ion-select-option value="900A39">900A39</ion-select-option>
            <ion-select-option value="900A40">900A40</ion-select-option>
            <ion-select-option value="900A41">900A41</ion-select-option>
            <ion-select-option value="900A42">900A42</ion-select-option>
            <ion-select-option value="900A43">900A43</ion-select-option>
            <ion-select-option value="900A44">900A44</ion-select-option>
            <ion-select-option value="900A45">900A45</ion-select-option>
          </ion-select>
          -->
        </ion-item>
        <!-- Message d'erreurs -->
        <div class="validation-errors">                          
          <ng-container *ngFor="let validation of messagesDeValidation.num_emplacement">
            <div class="error-message" *ngIf="saisieForm.get('num_emplacement').hasError(validation.type) 
            && (saisieForm.get('num_emplacement').dirty || saisieForm.get('num_emplacement').touched)">
              {{ validation.message }}
            </div>
          </ng-container>
        </div>

        <!-- Boutons -->
        <ion-button (click)="test()" [disabled]="!saisieForm.valid" shape="round" size="default" color="primary" expand="block">
          <ion-icon name="create"></ion-icon>
          Mise en Panne
        </ion-button>
    
        <ion-button (click)="startScanning()" expand="full" color="danger" shape="round" size="default" >
          <ion-icon name="camera" slot="start"></ion-icon>
          QRCode
        </ion-button>
      
      </form>
  </div>
    
 <div *ngSwitchCase="'historySegment'">
  <ion-grid>

    <ion-row>
      <ion-col>
        <div>
          Date d'ajout
        </div>
      </ion-col>
      <ion-col>
        <div>
          Capteur
        </div>
      </ion-col>
      <ion-col>
        <div>
          Emplacement
        </div>
      </ion-col>

      <ion-col>
        <div>
          Responsable
        </div>
      </ion-col>
    </ion-row>
  </ion-grid> 

 </div>
</div>  
</ion-content>